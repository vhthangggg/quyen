<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lời Chào Đặc Biệt!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --primary-color: #ff7eb9;
            --secondary-color: #00f5d4;
            --text-color: #e6e6e6;
            --secondary-text: #f0b6d1;
            --glow-color: rgba(255, 126, 185, 0.5);
            --particle-color: var(--primary-color);
            --container-bg: rgba(26, 26, 46, 0.9);
            --status-ok-color: var(--secondary-color);
        }

        body {
            background: var(--bg-color);
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            padding: 10px;
            box-sizing: border-box;
            position: relative;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(var(--secondary-text) 0.5px, transparent 0.5px);
            background-size: 25px 25px;
            opacity: 0.1;
            z-index: -1;
            animation: moveBackground 90s linear infinite;
        }

        body::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                rgba(26, 26, 46, 0.8) 0%, 
                rgba(58, 12, 163, 0.6) 50%, 
                rgba(255, 126, 185, 0.4) 100%);
            z-index: -2;
            opacity: 0.5;
            animation: gradientShift 15s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes moveBackground {
            from { background-position: 0 0; }
            to { background-position: 450px 450px; }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: float 10s infinite ease-in-out;
        }

        @keyframes float {
            0% { transform: translateY(10vh) scale(0.8); opacity: 0; }
            25% { opacity: 0.6; }
            50% { transform: translateY(-15vh) scale(1.2); opacity: 0.4; }
            75% { opacity: 0.6; }
            100% { transform: translateY(10vh) scale(0.8); opacity: 0; }
        }

        .container {
            background: var(--container-bg);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 20px;
            max-width: 90%;
            width: 100%;
            box-shadow: 0 0 20px var(--glow-color), 0 0 8px var(--primary-color) inset;
            text-align: center;
            position: relative;
            z-index: 1;
            animation: fadeInContainer 1.2s ease-out forwards;
            opacity: 0;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            box-sizing: border-box;
        }

        .container:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 0 30px var(--glow-color), 0 0 10px var(--primary-color) inset, 0 3px 10px rgba(0,0,0,0.1);
        }

        @keyframes fadeInContainer {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            color: var(--primary-color);
            font-size: 2em;
            margin-bottom: 8px;
            text-shadow: 0 0 10px var(--glow-color);
            animation: pulseGlow 2.5s infinite alternate ease-in-out;
        }

        @keyframes pulseGlow {
            from { text-shadow: 0 0 8px var(--glow-color); opacity: 0.9; }
            to { text-shadow: 0 0 15px var(--glow-color); opacity: 1; }
        }

        .header p {
            color: var(--secondary-text);
            font-size: 1em;
            margin-bottom: 20px;
        }

        .status-check {
            font-family: 'Roboto Mono', monospace;
            text-align: left;
            margin-bottom: 20px;
            border-left: 2px solid var(--primary-color);
            padding: 10px 15px;
            background: rgba(0,0,0, 0.15);
            border-radius: 0 5px 5px 0;
        }

        .status-check p {
            margin: 8px 0;
            font-size: 0.9em;
            color: var(--secondary-text);
            opacity: 0;
            animation: slideIn 0.6s ease-out forwards;
        }

        .status-check p:nth-child(1) { animation-delay: 0.7s; }
        .status-check p:nth-child(2) { animation-delay: 1.0s; }
        .status-check p:nth-child(3) { animation-delay: 1.3s; }
        .status-check p:nth-child(4) { animation-delay: 1.6s; }
        .status-check p:nth-child(5) { animation-delay: 1.9s; }
        .status-check p:nth-child(6) { animation-delay: 2.2s; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-15px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .status-check strong {
            color: var(--primary-color);
            font-weight: 400;
        }

        .status-check .status-ok {
            color: var(--status-ok-color);
            font-weight: bold;
        }

        .progress-container {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 8px;
            opacity: 0;
            animation: fadeInProgress 0.5s ease-out 2.2s forwards;
        }

        @keyframes fadeInProgress {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .progress-bar {
            width: 0;
            height: 4px;
            background: var(--primary-color);
            animation: progress 1.5s ease-out forwards;
            animation-delay: 2.4s;
        }

        @keyframes progress {
            from { width: 0; }
            to { width: 100%; }
        }

        .dynamic-content {
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInContent 1s ease-out 3.9s forwards;
            text-align: left;
            font-size: 1em;
            line-height: 1.6;
        }

        #dynamic-message-text p {
            margin-bottom: 12px;
            color: var(--text-color);
        }

        #dynamic-poem-text {
            font-style: italic;
            color: var(--secondary-text);
            margin-top: 20px;
            text-align: center;
            font-size: 0.9em;
            border-top: 1px dashed var(--secondary-text);
            padding-top: 12px;
        }

        #dynamic-poem-text strong {
            color: var(--primary-color);
            font-style: normal;
        }

        @keyframes fadeInContent {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .time-notification {
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 126, 185, 0.1);
            border-radius: 10px;
            border-left: 3px solid var(--primary-color);
            opacity: 0;
            animation: fadeInContent 1s ease-out 5s forwards;
        }

        .time-slots {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .time-slot {
            position: relative;
            padding: 8px 12px;
            margin: 5px;
            background: rgba(0, 245, 212, 0.1);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            background: rgba(0, 245, 212, 0.2);
            transform: translateY(-2px);
        }

        .time-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: var(--container-bg);
            color: var(--text-color);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .time-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--container-bg) transparent transparent transparent;
        }

        .flirt-container {
            min-height: 30px;
            position: relative;
            margin-top: 15px;
            opacity: 0;
            animation: fadeInContent 1s ease-out 4.4s forwards;
        }

        .flirt-line {
            font-style: italic;
            color: var(--secondary-text);
            font-size: 0.95em;
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
            opacity: 0;
            transition: opacity 1s ease;
            text-align: center;
        }

        .flirt-line.active {
            opacity: 1;
        }

        .icon {
            font-size: 2em;
            color: var(--primary-color);
            margin-top: 40px;
            display: inline-block;
            opacity: 0;
            cursor: pointer;
            animation: fadeInContent 1s ease-out 4.9s forwards, gentleBounce 2.8s infinite ease-in-out 4.9s;
            transition: transform 0.3s ease;
        }

        .icon:hover {
            transform: scale(1.2) rotate(10deg);
        }

        @keyframes gentleBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .typewriter {
            border-right: 2px solid var(--primary-color);
            animation: blink-caret 0.75s step-end infinite;
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--primary-color); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            opacity: 0;
            z-index: 1000;
            animation: confetti-fall 3s ease-in-out forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Media Queries */
        @media (max-width: 414px) {
            body {
                padding: 8px;
            }
            .container {
                padding: 15px;
                max-width: 95%;
                border-radius: 10px;
            }
            .header h1 {
                font-size: 1.8em;
                margin-bottom: 6px;
            }
            .header p {
                font-size: 0.9em;
                margin-bottom: 15px;
            }
            .status-check {
                padding: 8px 12px;
                margin-bottom: 15px;
            }
            .status-check p {
                font-size: 0.85em;
                margin: 6px 0;
            }
            .dynamic-content {
                font-size: 0.95em;
                margin-bottom: 15px;
            }
            #dynamic-message-text p {
                margin-bottom: 10px;
            }
            #dynamic-poem-text {
                font-size: 0.85em;
                margin-top: 15px;
                padding-top: 10px;
            }
            .flirt-container {
                min-height: 25px;
                margin-top: 10px;
            }
            .flirt-line {
                font-size: 0.9em;
            }
            .icon {
                font-size: 1.8em;
                margin-top: 30px;
            }
            .particle {
                width: 2px;
                height: 2px;
            }
            .time-notification {
                padding: 10px;
            }
            .time-slot {
                padding: 6px 10px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 375px) {
            .container {
                padding: 12px;
            }
            .header h1 {
                font-size: 1.6em;
            }
            .header p {
                font-size: 0.85em;
            }
            .status-check {
                padding: 6px 10px;
            }
            .status-check p {
                font-size: 0.8em;
            }
            .dynamic-content {
                font-size: 0.9em;
            }
            #dynamic-poem-text {
                font-size: 0.8em;
            }
            .flirt-line {
                font-size: 0.85em;
            }
            .icon {
                font-size: 1.6em;
                margin-top: 25px;
            }
            .time-slot {
                padding: 5px 8px;
                font-size: 0.8em;
            }
        }

        @media (max-width: 320px) {
            .container {
                padding: 10px;
            }
            .header h1 {
                font-size: 1.4em;
            }
            .header p {
                font-size: 0.8em;
            }
            .status-check {
                padding: 5px 8px;
            }
            .status-check p {
                font-size: 0.75em;
            }
            .dynamic-content {
                font-size: 0.85em;
            }
            #dynamic-poem-text {
                font-size: 0.75em;
            }
            .flirt-line {
                font-size: 0.8em;
            }
            .icon {
                font-size: 1.5em;
                margin-top: 20px;
            }
            .time-slot {
                padding: 4px 6px;
                font-size: 0.75em;
            }
        }
    </style>
</head>
<body>
    <div id="particles"></div>

    <div class="container" role="main">
        <div class="header">
            <h1 id="greeting-title">Đang tải lời chào...</h1>
            <p id="greeting-subtitle">...</p>
        </div>

        <div class="status-check">
            <p><strong>[CẢM BIẾN]:</strong> Ghi nhận tín hiệu quen thuộc...</p>
            <p><strong>[ĐỊNH VỊ]:</strong> Nguồn phát đang ở <strong>Hải Hà</strong>.</p>
            <p id="current-time"><strong>[TIME]:</strong> --:--</p>
            <p id="analysis-text"><strong>[PHÂN TÍCH]:</strong> Đang cảm nhận năng lượng...</p>
            <p id="system-status"><strong>[TRẠNG THÁI]:</strong> Chuẩn bị...</p>
            <p><strong>[PROGRESS]:</strong> Đồng bộ cảm hứng...</p>
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
        </div>

        <div class="dynamic-content">
            <div id="dynamic-message-text"><p>Một chút chờ đợi cho những điều dễ thương nhé...</p></div>
            <div id="dynamic-poem-text">"..."</div>
        </div>

        <div class="time-notification">
            <p>Mỗi khung giờ trong ngày đều có thông điệp đặc biệt dành riêng cho bạn!</p>
            <div class="time-slots">
                <span class="time-slot" data-time="morning">🌄 Buổi Sáng</span>
                <span class="time-slot" data-time="noon">☀️ Buổi Trưa</span>
                <span class="time-slot" data-time="afternoon">🌤️ Buổi Chiều</span>
                <span class="time-slot" data-time="evening">🌙 Buổi Tối</span>
            </div>
        </div>

        <div class="flirt-container">
            <div class="flirt-line active">...</div>
            <div class="flirt-line">...</div>
            <div class="flirt-line">...</div>
        </div>

        <div class="icon" aria-label="Biểu tượng cảm xúc">😊</div>
    </div>

    <script>
        // --- Particle Effect Script ---
        const particleContainer = document.getElementById('particles');
        
        function createAdvancedParticles() {
            const shapes = ['❤️', '⭐', '✦', '❀', '✧'];
            for (let i = 0; i < 20; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                
                if (Math.random() > 0.5) {
                    p.style.width = `${Math.random() * 5 + 2}px`;
                    p.style.height = p.style.width;
                    p.style.background = `radial-gradient(circle, var(--primary-color), transparent)`;
                } else {
                    p.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    p.style.fontSize = `${Math.random() * 10 + 10}px`;
                    p.style.color = `hsl(${Math.random() * 60 + 300}, 100%, 70%)`;
                }
                
                p.style.left = `${Math.random() * 100}vw`;
                p.style.top = `${Math.random() * 100}vh`;
                p.style.animationDuration = `${Math.random() * 10 + 5}s`;
                p.style.animationDelay = `${Math.random() * 5}s`;
                particleContainer.appendChild(p);
            }
        }

        // --- Time & Content Logic ---
        const now = new Date();
        const hour = now.getHours();
        const currentTimeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;

        let timeOfDay;
        let timeEmoji;
        
        if (hour >= 5 && hour < 11) {
            timeOfDay = "Buổi Sáng"; timeEmoji = "☀️";
            greetingVariations = [
                { title: `Chào Buổi Sáng, Quyên!`, subtitle: "Mong bạn một ngày mới thật nhiều năng lượng!" },
                { title: `Ngày Mới Tốt Lành, Quyên ơi!`, subtitle: "Hãy bắt đầu ngày bằng một nụ cười nhé." },
                { title: `Quyên Ơi, Dậy Chưa Nà?`, subtitle: "Mặt trời lên cao rồi đó, bạn yêu." }
            ];
            mainMessages = [
                { message: "Ánh nắng ban mai đang nhảy múa ngoài kia kìa! Chúc bạn một ngày thật <strong style='color: var(--primary-color);'>rạng rỡ</strong> và làm được nhiều điều bạn muốn nhé.", poem: "\"Nắng vàng trải nhẹ trên vai,<br> Chúc bạn ngày mới, <strong>thêm dài</strong> tiếng cười.\"" },
                { message: "Một tách cà phê thơm, một bản nhạc hay, và lời chào này gửi đến bạn. Hãy để ngày mới bắt đầu thật <strong style='color: var(--primary-color);'>nhẹ nhàng</strong> và <strong style='color: var(--secondary-color);'>ngọt ngào</strong> nhé.", poem: "\"Sớm mai chim hót líu lo,<br> Chúc bạn vui vẻ, <strong>khỏi lo</strong> muộn phiền.\"" },
                { message: "Thế giới ngoài kia đang chờ đợi nụ cười <strong style='color: var(--primary-color);'>tỏa nắng</strong> của bạn đó. Đừng giấu nó đi nha! Chúc bạn một buổi sáng thật hiệu quả và vui vẻ.", poem: "\"Mở lòng đón ánh bình minh,<br>Chúc bạn một ngày <strong>xinh đẹp</strong> như hoa.\"" }
            ];
            rotatingThoughts = [
                "Một nụ cười buổi sáng có thể thay đổi cả ngày đó!",
                "Đừng quên uống đủ nước nha bạn.",
                "Hít một hơi thật sâu... và bắt đầu thôi!",
                "Bạn của ngày hôm nay sẽ tuyệt vời hơn hôm qua.",
                "Nhớ dành thời gian cho bản thân một chút nhé."
            ];
            analysisOptions = [
                "Năng lượng 'tươi mới' đang được nạp.",
                "Cảm nhận sự 'an lành' đầu ngày.",
                "Chỉ số 'tích cực' tăng nhẹ.",
                "Không khí trong lành quá đi!"
            ];
            statusOptions = [
                "Sẵn sàng đón ngày mới!",
                "Khởi đầu thật nhẹ nhàng!",
                "Sẵn sàng tỏa sáng!",
                "Năng lượng tràn đầy!"
            ];
        } else if (hour >= 11 && hour < 14) {
            timeOfDay = "Buổi Trưa"; timeEmoji = "☀️";
            greetingVariations = [
                { title: `Trưa Rồi, Quyên ơi!`, subtitle: "Nghỉ ngơi nạp năng lượng chút nào." },
                { title: `Chúc Quyên Buổi Trưa Vui Vẻ!`, subtitle: "Hy vọng bạn đang có bữa trưa ngon miệng." }
            ];
            mainMessages = [
                { message: "Giờ nghỉ trưa rồi! Tạm gác lại công việc, thư giãn một chút và ăn trưa thật ngon miệng nha bạn. Nạp đầy năng lượng để buổi chiều <strong style='color: var(--primary-color);'>bùng nổ</strong> nhé!", poem: "\"Nắng trưa đổ bóng hàng cây,<br> Bạn ơi nghỉ một lát <strong>này</strong> cho vui.\"" },
                { message: "Dù bận rộn thế nào, cũng đừng quên dành cho mình một khoảng lặng buổi trưa nhé. Nghe một bài nhạc hay, đọc vài trang sách, hoặc đơn giản là nhắm mắt lại và hít thở. <strong style='color: var(--primary-color);'>Bình yên</strong> lắm đó.", poem: "\"Giờ trưa yên ả thanh bình,<br> Chúc bạn thư giãn, <strong>giữ gìn</strong> sức khoe.\"" }
            ];
            rotatingThoughts = [
                "Nghỉ ngơi một chút để đi được xa hơn.",
                "Một bữa trưa ngon miệng sẽ giúp bạn tỉnh táo hơn.",
                "Đừng làm việc quá sức nhé!",
                "Nghĩ về điều gì đó vui vẻ xem sao.",
                "Nửa ngày đã qua, nửa ngày nữa cố lên!"
            ];
            analysisOptions = [
                "Năng lượng 'ấm áp' giữa trưa.",
                "Cảm nhận sự 'thư thái' tạm thời.",
                "Chỉ số 'bình yên' ổn định.",
                "Mặt trời đang ở đỉnh điểm."
            ];
            statusOptions = [
                "Tạm dừng để tái tạo!",
                "Nạp pin cho buổi chiều!",
                "Giờ nghỉ ngơi!",
                "Thư giãn nào!"
            ];
        } else if (hour >= 14 && hour < 18) {
            timeOfDay = "Buổi Chiều"; timeEmoji = "🌤️";
            greetingVariations = [
                { title: `Buổi Chiều Êm ả, Quyên nhé!`, subtitle: "Sắp hết giờ làm rồi, cố lên bạn ơi!" },
                { title: `Chào Buổi Chiều, Quyên!`, subtitle: "Mong bạn một buổi chiều thật hiệu quả và vui." }
            ];
            mainMessages = [
                { message: "Buổi chiều thường là lúc dễ mất tập trung nhất. Hãy thử đứng dậy vươn vai, uống một cốc nước mát, hoặc nhìn ra ngoài cửa sổ xem. Chút thay đổi nhỏ cũng giúp bạn <strong style='color: var(--primary-color);'>tỉnh táo</strong> hơn đó.", poem: "\"Chiều buông nắng nhạt bên thềm,<br> Chúc bạn mọi việc <strong>êm đềm</strong> trôi qua.\"" },
                { message: "Sắp kết thúc một ngày làm việc rồi. Dù kết quả thế nào, bạn cũng đã cố gắng hết sức. Hãy tự thưởng cho mình một lời khen và chuẩn bị cho buổi tối <strong style='color: var(--primary-color);'>thư giãn</strong> nhé.", poem: "\"Hoàng hôn nhuộm tím chân trời,<br> Chúc bạn tan sở, <strong>thảnh thơi</strong> về nhà.\"" }
            ];
            rotatingThoughts = [
                "Sắp được về nhà rồi!",
                "Một chút nhạc nhẹ cho buổi chiều thêm chill.",
                "Nghĩ xem tối nay ăn gì ngon nhỉ?",
                "Bạn đã làm rất tốt hôm nay!",
                "Hoàn thành nốt việc cuối cùng nào!"
            ];
            analysisOptions = [
                "Năng lượng 'dịu nhẹ' cuối ngày.",
                "Cảm nhận sự 'thanh thản' dần đến.",
                "Chỉ số 'hoàn thành' đang tăng.",
                "Sắp đến giờ nghỉ ngơi."
            ];
            statusOptions = [
                "Hoàn thành nốt công việc!",
                "Sắp đến giờ tan làm!",
                "Chuẩn bị thư giãn!",
                "Cố lên chút nữa!"
            ];
        } else {
            timeOfDay = "Buổi Tối"; timeEmoji = "🌙";
            greetingVariations = [
                { title: `Buổi Tối An Lành, Quyên nhé!`, subtitle: "Gác lại mọi bộn bề và thư giãn thôi nào." },
                { title: `Chúc Quyên Ngủ Ngon!`, subtitle: "Mong bạn có những giấc mơ thật đẹp." }
            ];
            mainMessages = [
                { message: "Một ngày nữa đã qua. Hãy để những lo toan muộn phiền lại phía sau và tận hưởng buổi tối <strong style='color: var(--primary-color);'>yên bình</strong> bên những điều bạn yêu thích. Bạn xứng đáng được nghỉ ngơi.", poem: "\"Đêm về sao sáng đầy trời,<br> Chúc bạn ngon giấc, <strong>cuộc đời</strong> an yên.\"" },
                { message: "Ánh đèn đường đã lên, không khí thật <strong style='color: var(--primary-color);'>dịu dàng</strong>. Đây là thời gian hoàn hảo để đọc một cuốn sách hay, xem một bộ phim ấm áp, hoặc trò chuyện cùng người thân yêu. Chúc bạn buổi tối thật <strong style='color: var(--secondary-color);'>thư thái</strong>.", poem: "\"Trăng treo trên mái hiên nhà,<br> Ngủ đi bạn nhé, <strong>mơ hoa</strong> đầy cành.\"" },
                { message: "Đừng ôm đồm công việc hay suy nghĩ quá nhiều vào buổi tối nhé. Hãy để tâm trí được <strong style='color: var(--primary-color);'>nghỉ ngơi</strong> hoàn toàn. Một giấc ngủ sâu sẽ giúp bạn thức dậy sảng khoái vào ngày mai.", poem: "\"Gió khuya thổi nhẹ qua mành,<br> Ngủ đi bạn nhé, <strong>mộng lành</strong> tìm về.\"" }
            ];
            rotatingThoughts = [
                "Thư giãn và tận hưởng buổi tối của bạn.",
                "Một bản nhạc nhẹ nhàng sẽ giúp bạn dễ ngủ hơn.",
                "Gác lại lo âu, ngày mai lại bắt đầu.",
                "Bạn là tuyệt vời nhất!",
                "Ngủ thật ngon nhé!"
            ];
            analysisOptions = [
                "Không gian 'yên tĩnh' bao trùm.",
                "Cảm nhận sự 'bình yên' sâu lắng.",
                "Chỉ số 'thư giãn' ở mức cao.",
                "Thời gian để nghỉ ngơi."
            ];
            statusOptions = [
                "Đến giờ nghỉ ngơi!",
                "Nạp năng lượng cho ngày mai!",
                "Tận hưởng sự yên tĩnh!",
                "Thư giãn hoàn toàn!"
            ];
        }


        // --- TypeWriter Effect ---
        function typeWriter(element, text, speed = 50) {
            let i = 0;
            element.innerHTML = '';
            element.classList.add('typewriter');
            
            function typing() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                } else {
                    element.classList.remove('typewriter');
                }
            }
            typing();
        }

        // --- Confetti Effect ---
        function createConfetti() {
            const colors = ['#ff7eb9', '#00f5d4', '#ffcc00', '#7afcff', '#feff9c'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }

        // --- Weather API ---
        async function fetchWeather() {
            try {
                const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=21.528&longitude=107.599&hourly=temperature_2m,precipitation_probability,dew_point_2m&timezone=Asia/Bangkok&forecast_days=1');
                const data = await response.json();
                
                const currentHour = now.getHours();
                const temp = data.hourly.temperature_2m[currentHour];
                const rainProb = data.hourly.precipitation_probability[currentHour];
                
                const weatherElement = document.createElement('p');
                weatherElement.innerHTML = `<strong>[THỜI TIẾT]:</strong> Hải Hà: ${temp}°C, ${rainProb}% mưa`;
                document.querySelector('.status-check').appendChild(weatherElement);
            } catch (error) {
                console.error('Lỗi khi lấy dữ liệu thời tiết:', error);
            }
        }

        // --- Parallax Effect ---
        function setupParallax() {
            const container = document.querySelector('.container');
            window.addEventListener('scroll', () => {
                const scrollPosition = window.pageYOffset;
                container.style.transform = `translateY(${scrollPosition * 0.2}px)`;
            });
        }

        // --- Time Tooltips ---
        function setupTimeTooltips() {
            const timeSlots = document.querySelectorAll('.time-slot');
            const tooltipMessages = {
                morning: "5h - 11h: Thông điệp tươi mới bắt đầu ngày",
                noon: "11h - 14h: Lời nhắn giữa ngày đầy năng lượng",
                afternoon: "14h - 18h: Động lực cuối giờ làm việc",
                evening: "18h - 5h: Những lời chúc ngọt ngào buổi tối"
            };
            
            timeSlots.forEach(slot => {
                const time = slot.dataset.time;
                const tooltip = document.createElement('div');
                tooltip.className = 'time-tooltip';
                tooltip.textContent = tooltipMessages[time];
                slot.appendChild(tooltip);
                
                slot.addEventListener('mouseenter', () => {
                    tooltip.style.opacity = '1';
                    tooltip.style.transform = 'translateY(0)';
                });
                
                slot.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                    tooltip.style.transform = 'translateY(10px)';
                });
            });
        }

        // --- Rotating Thoughts ---
        function setupRotatingThoughts() {
            const flirtContainer = document.querySelector('.flirt-container');
            const flirtElements = flirtContainer.querySelectorAll('.flirt-line');
            let currentThoughtIndex = 0;
            
            function showNextThought() {
                flirtElements.forEach(el => el.classList.remove('active'));
                const elementIndex = currentThoughtIndex % flirtElements.length;
                flirtElements[elementIndex].classList.add('active');
                currentThoughtIndex++;
            }
            
            setTimeout(() => {
                showNextThought();
                setInterval(showNextThought, 6000);
            }, 5900);
        }

        // --- Random Icon ---
        function setupRandomIcon() {
            const iconElement = document.querySelector('.icon');
            const icons = ['😊', '💖', '✨', '🌸', '🌟', '☀️', '🌙'];
            iconElement.textContent = icons[Math.floor(Math.random() * icons.length)];
        }

        // --- Initialize Everything ---
        document.addEventListener('DOMContentLoaded', () => {
            createAdvancedParticles();
            setupParallax();
            setupTimeTooltips();
            setupRotatingThoughts();
            setupRandomIcon();
            
            // Basic content setup
            document.getElementById('current-time').innerHTML = `<strong>[TIME]:</strong> ${currentTimeString} ${timeEmoji}`;
            document.title = `Lời Chào ${timeOfDay}!`;
            
            // Typewriter effects
            typeWriter(document.getElementById('greeting-title'), `Chào ${timeOfDay}!`);
            document.getElementById('greeting-subtitle').textContent = `Thông điệp đặc biệt dành cho bạn vào ${timeOfDay.toLowerCase()}`;
            
            // Delayed effects
            setTimeout(() => {
                document.getElementById('analysis-text').innerHTML = `<strong>[PHÂN TÍCH]:</strong> Năng lượng ${timeOfDay.toLowerCase()} đang được nạp.`;
                document.getElementById('system-status').innerHTML = `<strong>[TRẠNG THÁI]:</strong> <strong class="status-ok">Sẵn sàng!</strong>`;
            }, 1900);
            
            setTimeout(createConfetti, 4000);
            setTimeout(fetchWeather, 3000);
        });
    </script>
</body>
</html>
